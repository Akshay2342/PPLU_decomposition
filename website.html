<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Image Watermarking System</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/numjs@0.16.1/dist/numjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.18.0/dist/tf.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Poppins:wght@400;500;600;700&display=swap');
        
        body {
            font-family: 'Roboto', sans-serif;
            color: #333;
            background-color: #f5f8fa;
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Poppins', sans-serif;
        }
        
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }
        
        .upload-area {
            border: 2px dashed #cbd5e0;
            transition: all 0.3s ease;
        }
        
        .upload-area:hover {
            border-color: #4299e1;
        }
        
        .btn-primary {
            background-color: #4299e1;
            color: white;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            background-color: #3182ce;
            transform: translateY(-1px);
        }
        
        .tab {
            cursor: pointer;
            padding: 10px 20px;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .tab.active {
            border-bottom: 2px solid #4299e1;
            color: #4299e1;
            font-weight: 500;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .metric-card {
            background-color: #ebf8ff;
            border-left: 4px solid #4299e1;
        }
        
        canvas {
            max-width: 100%;
            height: auto;
        }
        
        .image-container {
            position: relative;
            overflow: hidden;
            border-radius: 6px;
        }
        
        .loader {
            border-top-color: #4299e1;
            animation: spinner 0.6s linear infinite;
        }
        
        @keyframes spinner {
            to {transform: rotate(360deg);}
        }
        
        .progress-bar {
            height: 6px;
            background-color: #e2e8f0;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-bar-inner {
            height: 100%;
            background-color: #4299e1;
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        .tooltip {
            visibility: hidden;
            position: absolute;
            background-color: #1a202c;
            color: white;
            text-align: center;
            padding: 5px 10px;
            border-radius: 6px;
            z-index: 1;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
        }
        
        .tooltip::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #1a202c transparent transparent transparent;
        }
        
        .has-tooltip:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }
        
        .parameter-slider {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #e2e8f0;
            outline: none;
        }
        
        .parameter-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #4299e1;
            cursor: pointer;
        }
        
        .parameter-slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #4299e1;
            cursor: pointer;
        }
        
        /* Add print-specific styles for PDF export */
        @media print {
            body {
                width: 100%;
                margin: 0;
                padding: 0;
                background-color: white;
            }
            
            .card {
                box-shadow: none;
                border: 1px solid #e2e8f0;
                break-inside: avoid;
            }
            
            .no-print {
                display: none !important;
            }
            
            .page-break {
                display: none;
            }
            
            .container {
                width: 100%;
                max-width: none;
                padding: 0;
            }
        }
    </style>
</head>
<body class="min-h-screen">
    <header class="bg-white shadow-sm">
        <div class="container mx-auto px-4 py-6">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div>
                    <h1 class="text-3xl font-bold text-gray-800">Digital Watermarking System</h1>
                    <p class="text-gray-600 mt-2">PPLU Decomposition & Wavelet Transform</p>
                </div>
                <div class="mt-4 md:mt-0">
                    <span class="text-sm text-gray-600 mr-2">Theme:</span>
                    <button id="theme-toggle" class="px-3 py-1 rounded bg-gray-200 text-gray-700 text-sm">
                        <i class="fas fa-moon"></i> Dark Mode
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <!-- Introduction Section -->
        <section class="card p-6 mb-8">
            <h2 class="text-xl font-semibold mb-4">About Digital Watermarking</h2>
            <p class="text-gray-700 mb-4">
                Digital watermarking is a technique for embedding identification information into digital content such as images, audio, or video. 
                This system uses PPLU decomposition and wavelet transforms to create robust watermarks that can withstand various attacks.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
                <div class="bg-blue-50 p-4 rounded-lg">
                    <h3 class="font-medium text-blue-700 mb-2"><i class="fas fa-shield-alt mr-2"></i>Robust Protection</h3>
                    <p class="text-sm text-gray-600">Watermarks remain detectable even after image manipulation, compression, or filtering.</p>
                </div>
                <div class="bg-green-50 p-4 rounded-lg">
                    <h3 class="font-medium text-green-700 mb-2"><i class="fas fa-eye-slash mr-2"></i>Imperceptible</h3>
                    <p class="text-sm text-gray-600">The watermark is visually transparent and doesn't degrade the cover image quality.</p>
                </div>
                <div class="bg-purple-50 p-4 rounded-lg">
                    <h3 class="font-medium text-purple-700 mb-2"><i class="fas fa-fingerprint mr-2"></i>Authentication</h3>
                    <p class="text-sm text-gray-600">Provides proof of ownership and detects tampering by extracting the embedded watermark.</p>
                </div>
            </div>
        </section>

        <!-- Upload Section -->
        <section class="card p-6 mb-8">
            <h2 class="text-xl font-semibold mb-4">Upload Images</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Cover Image Upload -->
                <div>
                    <h3 class="text-lg font-medium mb-2">Cover Image</h3>
                    <p class="text-sm text-gray-600 mb-3">The original image that will contain the watermark.</p>
                    <div id="cover-upload-area" class="upload-area p-4 text-center rounded-lg cursor-pointer">
                        <div id="cover-upload-content">
                            <i class="fas fa-image text-gray-400 text-4xl mb-3"></i>
                            <p class="text-gray-500">Drag & drop your cover image here or</p>
                            <button class="mt-2 px-4 py-2 bg-blue-100 text-blue-600 rounded hover:bg-blue-200 transition">Browse Files</button>
                            <input type="file" id="cover-image-input" class="hidden" accept="image/*">
                        </div>
                        <div id="cover-image-preview" class="hidden">
                            <img id="cover-preview" class="mx-auto max-h-64 rounded">
                            <p id="cover-file-name" class="mt-2 text-sm text-gray-600"></p>
                            <button id="change-cover" class="mt-2 text-sm text-blue-600 hover:underline">Change Image</button>
                        </div>
                    </div>
                </div>
                
                <!-- Watermark Image Upload -->
                <div>
                    <h3 class="text-lg font-medium mb-2">Watermark Image</h3>
                    <p class="text-sm text-gray-600 mb-3">The image to be embedded into the cover image.</p>
                    <div id="watermark-upload-area" class="upload-area p-4 text-center rounded-lg cursor-pointer">
                        <div id="watermark-upload-content">
                            <i class="fas fa-copyright text-gray-400 text-4xl mb-3"></i>
                            <p class="text-gray-500">Drag & drop your watermark image here or</p>
                            <button class="mt-2 px-4 py-2 bg-blue-100 text-blue-600 rounded hover:bg-blue-200 transition">Browse Files</button>
                            <input type="file" id="watermark-image-input" class="hidden" accept="image/*">
                        </div>
                        <div id="watermark-image-preview" class="hidden">
                            <img id="watermark-preview" class="mx-auto max-h-64 rounded">
                            <p id="watermark-file-name" class="mt-2 text-sm text-gray-600"></p>
                            <button id="change-watermark" class="mt-2 text-sm text-blue-600 hover:underline">Change Image</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Parameters Section -->
        <section class="card p-6 mb-8">
            <h2 class="text-xl font-semibold mb-4">Watermarking Parameters</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div>
                    <label for="alpha-slider" class="block text-sm font-medium text-gray-700 mb-2">
                        Embedding Strength (α): <span id="alpha-value">0.3</span>
                    </label>
                    <div class="has-tooltip relative">
                        <span class="tooltip">Controls visibility vs. robustness tradeoff</span>
                        <input type="range" id="alpha-slider" class="parameter-slider" min="0.1" max="0.5" step="0.05" value="0.3">
                    </div>
                    <p class="mt-1 text-xs text-gray-500">Higher values increase robustness but may reduce imperceptibility.</p>
                </div>
                
                <div>
                    <label for="iterations-slider" class="block text-sm font-medium text-gray-700 mb-2">
                        Arnold Transform Iterations: <span id="iterations-value">10</span>
                    </label>
                    <div class="has-tooltip relative">
                        <span class="tooltip">Controls the scrambling level of the watermark</span>
                        <input type="range" id="iterations-slider" class="parameter-slider" min="1" max="20" step="1" value="10">
                    </div>
                    <p class="mt-1 text-xs text-gray-500">More iterations increase security but computational cost.</p>
                </div>
                
                <div>
                    <label for="wavelet-select" class="block text-sm font-medium text-gray-700 mb-2">
                        Wavelet Type
                    </label>
                    <div class="has-tooltip relative">
                        <span class="tooltip">Different wavelet types affect frequency decomposition</span>
                        <select id="wavelet-select" class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            <option value="db1">Daubechies 1 (Haar)</option>
                            <option value="db2" selected>Daubechies 2</option>
                            <option value="db4">Daubechies 4</option>
                            <option value="sym4">Symlet 4</option>
                            <option value="coif1">Coiflet 1</option>
                        </select>
                    </div>
                    <p class="mt-1 text-xs text-gray-500">Affects how image frequencies are decomposed for embedding.</p>
                </div>
            </div>
            
            <div class="mt-6">
                <button id="process-button" class="btn-primary px-6 py-3 rounded-lg font-medium flex items-center">
                    <i class="fas fa-magic mr-2"></i> Process Watermarking
                </button>
                <div id="processing-indicator" class="hidden mt-4">
                    <div class="flex items-center">
                        <div class="loader mr-3 w-5 h-5 rounded-full border-2 border-gray-300 border-t-2"></div>
                        <span id="processing-text" class="text-sm text-gray-600">Processing...</span>
                    </div>
                    <div class="progress-bar mt-2">
                        <div id="progress-bar-inner" class="progress-bar-inner" style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Results Section (Initially Hidden) -->
        <section id="results-section" class="hidden">
            <!-- Tabs Navigation -->
            <div class="border-b border-gray-200 mb-6">
                <ul class="flex flex-wrap -mb-px">
                    <li class="mr-2">
                        <div class="tab active" data-tab="watermarking-results">
                            <i class="fas fa-image mr-2"></i>Watermarking Results
                        </div>
                    </li>
                    <li class="mr-2">
                        <div class="tab" data-tab="attack-analysis">
                            <i class="fas fa-shield-alt mr-2"></i>Attack Analysis
                        </div>
                    </li>
                    <li class="mr-2">
                        <div class="tab" data-tab="metrics-charts">
                            <i class="fas fa-chart-bar mr-2"></i>Metrics & Charts
                        </div>
                    </li>
                </ul>
            </div>
            
            <!-- Watermarking Results Tab -->
            <div id="watermarking-results" class="tab-content active">
                <div class="card p-6 mb-8">
                    <h2 class="text-xl font-semibold mb-4">Watermarking Process</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                        <div class="text-center">
                            <div class="image-container mb-2">
                                <img id="original-cover-display" class="mx-auto rounded max-h-48 w-auto">
                            </div>
                            <h3 class="font-medium">Original Cover Image</h3>
                        </div>
                        
                        <div class="text-center">
                            <div class="image-container mb-2">
                                <img id="original-watermark-display" class="mx-auto rounded max-h-48 w-auto">
                            </div>
                            <h3 class="font-medium">Original Watermark</h3>
                        </div>
                        
                        <div class="text-center">
                            <div class="image-container mb-2">
                                <img id="watermarked-image-display" class="mx-auto rounded max-h-48 w-auto">
                            </div>
                            <h3 class="font-medium">Watermarked Image</h3>
                            <p id="psnr-value" class="text-sm text-blue-600 mt-1">PSNR: -- dB</p>
                        </div>
                    </div>
                    
                    <div class="mt-8">
                        <h3 class="text-lg font-medium mb-3">Watermark Extraction</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="text-center">
                                <div class="image-container mb-2">
                                    <img id="extracted-watermark-display" class="mx-auto rounded max-h-48 w-auto">
                                </div>
                                <h3 class="font-medium">Extracted Watermark (No Attack)</h3>
                                <p id="cc-original-value" class="text-sm text-blue-600 mt-1">Correlation: --</p>
                            </div>
                            
                            <div>
                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <h4 class="font-medium text-gray-700 mb-2">Process Summary</h4>
                                    <ul class="text-sm text-gray-600 space-y-2">
                                        <li><span class="font-medium">Embedding Method:</span> PPLU Decomposition & Wavelet Transform</li>
                                        <li><span class="font-medium">Image Dimensions:</span> <span id="image-dimensions">-- x --</span></li>
                                        <li><span class="font-medium">Embedding Strength (α):</span> <span id="summary-alpha">0.3</span></li>
                                        <li><span class="font-medium">Arnold Transform Iterations:</span> <span id="summary-iterations">10</span></li>
                                        <li><span class="font-medium">Wavelet Type:</span> <span id="summary-wavelet">db2</span></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Attack Analysis Tab -->
            <div id="attack-analysis" class="tab-content hidden">
                <div class="card p-6 mb-8">
                    <h2 class="text-xl font-semibold mb-4">Robustness Against Attacks</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <!-- Blur Attack -->
                        <div>
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h3 class="font-medium text-gray-800 mb-3">Blur Attack</h3>
                                <div class="grid grid-cols-2 gap-3">
                                    <div class="text-center">
                                        <div class="image-container">
                                            <img id="blur-attack-image" class="mx-auto rounded max-h-32 w-auto">
                                        </div>
                                        <p class="text-xs text-gray-500 mt-1">Attacked Image</p>
                                    </div>
                                    <div class="text-center">
                                        <div class="image-container">
                                            <img id="blur-extracted-watermark" class="mx-auto rounded max-h-32 w-auto">
                                        </div>
                                        <p class="text-xs text-gray-500 mt-1">Extracted Watermark</p>
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <div class="flex justify-between text-sm">
                                        <span>Correlation:</span>
                                        <span id="cc-blur-value" class="font-medium text-blue-600">--</span>
                                    </div>
                                    <div class="progress-bar mt-1">
                                        <div id="cc-blur-bar" class="progress-bar-inner" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Noise Attack -->
                        <div>
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h3 class="font-medium text-gray-800 mb-3">Noise Attack</h3>
                                <div class="grid grid-cols-2 gap-3">
                                    <div class="text-center">
                                        <div class="image-container">
                                            <img id="noise-attack-image" class="mx-auto rounded max-h-32 w-auto">
                                        </div>
                                        <p class="text-xs text-gray-500 mt-1">Attacked Image</p>
                                    </div>
                                    <div class="text-center">
                                        <div class="image-container">
                                            <img id="noise-extracted-watermark" class="mx-auto rounded max-h-32 w-auto">
                                        </div>
                                        <p class="text-xs text-gray-500 mt-1">Extracted Watermark</p>
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <div class="flex justify-between text-sm">
                                        <span>Correlation:</span>
                                        <span id="cc-noise-value" class="font-medium text-blue-600">--</span>
                                    </div>
                                    <div class="progress-bar mt-1">
                                        <div id="cc-noise-bar" class="progress-bar-inner" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- JPEG Compression Attack -->
                        <div>
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h3 class="font-medium text-gray-800 mb-3">JPEG Compression</h3>
                                <div class="grid grid-cols-2 gap-3">
                                    <div class="text-center">
                                        <div class="image-container">
                                            <img id="jpeg-attack-image" class="mx-auto rounded max-h-32 w-auto">
                                        </div>
                                        <p class="text-xs text-gray-500 mt-1">Attacked Image</p>
                                    </div>
                                    <div class="text-center">
                                        <div class="image-container">
                                            <img id="jpeg-extracted-watermark" class="mx-auto rounded max-h-32 w-auto">
                                        </div>
                                        <p class="text-xs text-gray-500 mt-1">Extracted Watermark</p>
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <div class="flex justify-between text-sm">
                                        <span>Correlation:</span>
                                        <span id="cc-jpeg-value" class="font-medium text-blue-600">--</span>
                                    </div>
                                    <div class="progress-bar mt-1">
                                        <div id="cc-jpeg-bar" class="progress-bar-inner" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Cropping Attack -->
                        <div>
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h3 class="font-medium text-gray-800 mb-3">Cropping Attack</h3>
                                <div class="grid grid-cols-2 gap-3">
                                    <div class="text-center">
                                        <div class="image-container">
                                            <img id="crop-attack-image" class="mx-auto rounded max-h-32 w-auto">
                                        </div>
                                        <p class="text-xs text-gray-500 mt-1">Attacked Image</p>
                                    </div>
                                    <div class="text-center">
                                        <div class="image-container">
                                            <img id="crop-extracted-watermark" class="mx-auto rounded max-h-32 w-auto">
                                        </div>
                                        <p class="text-xs text-gray-500 mt-1">Extracted Watermark</p>
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <div class="flex justify-between text-sm">
                                        <span>Correlation:</span>
                                        <span id="cc-crop-value" class="font-medium text-blue-600">--</span>
                                    </div>
                                    <div class="progress-bar mt-1">
                                        <div id="cc-crop-bar" class="progress-bar-inner" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Rotation Attack -->
                        <div>
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h3 class="font-medium text-gray-800 mb-3">Rotation Attack</h3>
                                <div class="grid grid-cols-2 gap-3">
                                    <div class="text-center">
                                        <div class="image-container">
                                            <img id="rotation-attack-image" class="mx-auto rounded max-h-32 w-auto">
                                        </div>
                                        <p class="text-xs text-gray-500 mt-1">Attacked Image</p>
                                    </div>
                                    <div class="text-center">
                                        <div class="image-container">
                                            <img id="rotation-extracted-watermark" class="mx-auto rounded max-h-32 w-auto">
                                        </div>
                                        <p class="text-xs text-gray-500 mt-1">Extracted Watermark</p>
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <div class="flex justify-between text-sm">
                                        <span>Correlation:</span>
                                        <span id="cc-rotation-value" class="font-medium text-blue-600">--</span>
                                    </div>
                                    <div class="progress-bar mt-1">
                                        <div id="cc-rotation-bar" class="progress-bar-inner" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Metrics & Charts Tab -->
            <div id="metrics-charts" class="tab-content hidden">
                <div class="card p-6 mb-8">
                    <h2 class="text-xl font-semibold mb-4">Performance Metrics</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <div>
                            <h3 class="text-lg font-medium mb-3">Image Quality</h3>
                            <div class="metric-card p-4 rounded-lg">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="text-gray-700">Peak Signal-to-Noise Ratio (PSNR)</h4>
                                        <p class="text-sm text-gray-500">Measures the quality of the watermarked image</p>
                                    </div>
                                    <div class="text-2xl font-bold text-blue-600" id="metrics-psnr">-- dB</div>
                                </div>
                                <div class="mt-2">
                                    <div class="text-xs text-gray-500 flex justify-between">
                                        <span>Poor</span>
                                        <span>Good</span>
                                        <span>Excellent</span>
                                    </div>
                                    <div class="progress-bar mt-1">
                                        <div id="psnr-quality-bar" class="progress-bar-inner" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h3 class="text-lg font-medium mb-3">Watermark Recovery</h3>
                            <div class="metric-card p-4 rounded-lg">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="text-gray-700">Correlation Coefficient</h4>
                                        <p class="text-sm text-gray-500">Measures similarity between original and extracted watermark</p>
                                    </div>
                                    <div class="text-2xl font-bold text-blue-600" id="metrics-cc">--</div>
                                </div>
                                <div class="mt-2">
                                    <div class="text-xs text-gray-500 flex justify-between">
                                        <span>Poor</span>
                                        <span>Good</span>
                                        <span>Excellent</span>
                                    </div>
                                    <div class="progress-bar mt-1">
                                        <div id="cc-quality-bar" class="progress-bar-inner" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h3 class="text-lg font-medium mb-3">Attack Resistance Chart</h3>
                            <div class="bg-white p-4 rounded-lg shadow">
                                <canvas id="attack-chart" height="250"></canvas>
                            </div>
                        </div>
                        
                        <div>
                            <h3 class="text-lg font-medium mb-3">Summary Report</h3>
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-700 mb-2">Performance Analysis</h4>
                                <ul id="performance-analysis" class="text-sm text-gray-600 space-y-2">
                                    <li><span class="font-medium">Overall Quality:</span> <span id="overall-quality">Pending analysis...</span></li>
                                    <li><span class="font-medium">Best Attack Resistance:</span> <span id="best-resistance">Pending analysis...</span></li>
                                    <li><span class="font-medium">Worst Attack Resistance:</span> <span id="worst-resistance">Pending analysis...</span></li>
                                    <li><span class="font-medium">Recommended Applications:</span> <span id="recommended-applications">Pending analysis...</span></li>
                                </ul>
                            </div>
                            
                            <div class="bg-blue-50 p-4 rounded-lg mt-4">
                                <h4 class="font-medium text-blue-700 mb-2">Optimization Suggestions</h4>
                                <ul id="optimization-suggestions" class="text-sm text-gray-600 space-y-2">
                                    <li>Pending analysis...</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-800 text-white py-6 mt-8">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <h2 class="text-xl font-semibold">Digital Watermarking System</h2>
                    <p class="text-gray-400 text-sm mt-1">PPLU Decomposition & Wavelet Transform Method</p>
                </div>
                <div class="flex space-x-4">
                    <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-github"></i></a>
                    <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-linkedin"></i></a>
                    <a href="#" class="text-gray-400 hover:text-white transition"><i class="fas fa-envelope"></i></a>
                </div>
            </div>
            
        </div>
    </footer>

    <!-- JavaScript Code -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const coverUploadArea = document.getElementById('cover-upload-area');
            const coverImageInput = document.getElementById('cover-image-input');
            const coverUploadContent = document.getElementById('cover-upload-content');
            const coverImagePreview = document.getElementById('cover-image-preview');
            const coverPreview = document.getElementById('cover-preview');
            const coverFileName = document.getElementById('cover-file-name');
            const changeCover = document.getElementById('change-cover');
            
            const watermarkUploadArea = document.getElementById('watermark-upload-area');
            const watermarkImageInput = document.getElementById('watermark-image-input');
            const watermarkUploadContent = document.getElementById('watermark-upload-content');
            const watermarkImagePreview = document.getElementById('watermark-image-preview');
            const watermarkPreview = document.getElementById('watermark-preview');
            const watermarkFileName = document.getElementById('watermark-file-name');
            const changeWatermark = document.getElementById('change-watermark');
            
            const alphaSlider = document.getElementById('alpha-slider');
            const alphaValue = document.getElementById('alpha-value');
            const iterationsSlider = document.getElementById('iterations-slider');
            const iterationsValue = document.getElementById('iterations-value');
            const waveletSelect = document.getElementById('wavelet-select');
            
            const processButton = document.getElementById('process-button');
            const processingIndicator = document.getElementById('processing-indicator');
            const processingText = document.getElementById('processing-text');
            const progressBarInner = document.getElementById('progress-bar-inner');
            
            const resultsSection = document.getElementById('results-section');
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            const themeToggle = document.getElementById('theme-toggle');
            
            // Variables to store uploaded images
            let coverImage = null;
            let watermarkImage = null;
            
            // Theme toggle
            themeToggle.addEventListener('click', function() {
                document.body.classList.toggle('dark-mode');
                if (document.body.classList.contains('dark-mode')) {
                    themeToggle.innerHTML = '<i class="fas fa-sun"></i> Light Mode';
                } else {
                    themeToggle.innerHTML = '<i class="fas fa-moon"></i> Dark Mode';
                }
            });
            
            // Cover image upload
            coverUploadArea.addEventListener('click', function() {
                coverImageInput.click();
            });
            
            coverImageInput.addEventListener('change', function() {
                handleImageUpload(this.files[0], coverPreview, coverFileName, coverUploadContent, coverImagePreview, 'cover');
            });
            
            changeCover.addEventListener('click', function() {
                coverImageInput.click();
            });
            
            // Watermark image upload
            watermarkUploadArea.addEventListener('click', function() {
                watermarkImageInput.click();
            });
            
            watermarkImageInput.addEventListener('change', function() {
                handleImageUpload(this.files[0], watermarkPreview, watermarkFileName, watermarkUploadContent, watermarkImagePreview, 'watermark');
            });
            
            changeWatermark.addEventListener('click', function() {
                watermarkImageInput.click();
            });
            
            // Drag and drop for cover image
            setupDragAndDrop(coverUploadArea, function(file) {
                handleImageUpload(file, coverPreview, coverFileName, coverUploadContent, coverImagePreview, 'cover');
            });
            
            // Drag and drop for watermark image
            setupDragAndDrop(watermarkUploadArea, function(file) {
                handleImageUpload(file, watermarkPreview, watermarkFileName, watermarkUploadContent, watermarkImagePreview, 'watermark');
            });
            
            // Parameter sliders
            alphaSlider.addEventListener('input', function() {
                alphaValue.textContent = this.value;
            });
            
            iterationsSlider.addEventListener('input', function() {
                iterationsValue.textContent = this.value;
            });
            
            // Process button
            processButton.addEventListener('click', function() {
                if (!coverImage || !watermarkImage) {
                    alert('Please upload both a cover image and a watermark image.');
                    return;
                }
                
                startProcessing();
            });
            
            // Tab switching
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.add('hidden'));
                    
                    this.classList.add('active');
                    document.getElementById(tabId).classList.remove('hidden');
                });
            });
            
            // Functions
            function handleImageUpload(file, previewElement, fileNameElement, uploadContentElement, previewContainerElement, type) {
                if (!file || !file.type.match('image.*')) {
                    alert('Please select an image file.');
                    return;
                }
                
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    previewElement.src = e.target.result;
                    fileNameElement.textContent = file.name;
                    uploadContentElement.classList.add('hidden');
                    previewContainerElement.classList.remove('hidden');
                    
                    // Create an image object to get dimensions
                    const img = new Image();
                    img.onload = function() {
                        if (type === 'cover') {
                            coverImage = {
                                data: e.target.result,
                                width: img.width,
                                height: img.height
                            };
                        } else {
                            watermarkImage = {
                                data: e.target.result,
                                width: img.width,
                                height: img.height
                            };
                        }
                    };
                    img.src = e.target.result;
                };
                
                reader.readAsDataURL(file);
            }
            
            function setupDragAndDrop(dropzone, callback) {
                ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                    dropzone.addEventListener(eventName, preventDefaults, false);
                });
                
                function preventDefaults(e) {
                    e.preventDefault();
                    e.stopPropagation();
                }
                
                ['dragenter', 'dragover'].forEach(eventName => {
                    dropzone.addEventListener(eventName, highlight, false);
                });
                
                ['dragleave', 'drop'].forEach(eventName => {
                    dropzone.addEventListener(eventName, unhighlight, false);
                });
                
                function highlight() {
                    dropzone.classList.add('border-blue-500');
                    dropzone.classList.add('bg-blue-50');
                }
                
                function unhighlight() {
                    dropzone.classList.remove('border-blue-500');
                    dropzone.classList.remove('bg-blue-50');
                }
                
                dropzone.addEventListener('drop', handleDrop, false);
                
                function handleDrop(e) {
                    const dt = e.dataTransfer;
                    const file = dt.files[0];
                    callback(file);
                }
            }
            
            function startProcessing() {
                // Show processing indicator
                processButton.disabled = true;
                processingIndicator.classList.remove('hidden');
                
                // Simulate processing steps
                simulateProcessStep('Preparing images...', 10);
                
                setTimeout(() => {
                    simulateProcessStep('Performing PPLU decomposition...', 30);
                    
                    setTimeout(() => {
                        simulateProcessStep('Applying Arnold transform...', 50);
                        
                        setTimeout(() => {
                            simulateProcessStep('Embedding watermark...', 70);
                            
                            setTimeout(() => {
                                simulateProcessStep('Simulating attacks...', 85);
                                
                                setTimeout(() => {
                                    simulateProcessStep('Finalizing results...', 100);
                                    
                                    setTimeout(() => {
                                        finishProcessing();
                                    }, 1000);
                                }, 1000);
                            }, 1500);
                        }, 1000);
                    }, 1200);
                }, 800);
            }
            
            function simulateProcessStep(text, progress) {
                processingText.textContent = text;
                progressBarInner.style.width = `${progress}%`;
            }
            
            function finishProcessing() {
                // Hide processing indicator
                processButton.disabled = false;
                processingIndicator.classList.add('hidden');
                
                // Show results section
                resultsSection.classList.remove('hidden');
                
                // Populate results
                populateResults();
                
                // Scroll to results
                resultsSection.scrollIntoView({ behavior: 'smooth' });
            }
            
            function populateResults() {
                // Display parameters in summary
                document.getElementById('summary-alpha').textContent = alphaSlider.value;
                document.getElementById('summary-iterations').textContent = iterationsSlider.value;
                document.getElementById('summary-wavelet').textContent = waveletSelect.value;
                
                // Display dimensions
                document.getElementById('image-dimensions').textContent = `${coverImage.width} x ${coverImage.height}`;
                
                // Display images
                document.getElementById('original-cover-display').src = coverImage.data;
                document.getElementById('original-watermark-display').src = watermarkImage.data;
                
                // Simulate watermarked image (in a real implementation, this would be generated)
                document.getElementById('watermarked-image-display').src = coverImage.data;
                
                // Simulate extracted watermark (in a real implementation, this would be generated)
                document.getElementById('extracted-watermark-display').src = watermarkImage.data;
                
                // Generate simulated attack images and extracted watermarks
                simulateAttacks();
                
                // Generate metrics
                generateMetrics();
                
                // Create chart
                createAttackChart();
                
                // Generate analysis and suggestions
                generateAnalysis();
            }
            
            function simulateAttacks() {
                // In a real implementation, these would be generated using actual image processing algorithms
                // For demonstration, we're just using the original images with CSS filters
                
                // Blur attack
                const blurAttackImage = document.getElementById('blur-attack-image');
                blurAttackImage.src = coverImage.data;
                blurAttackImage.style.filter = 'blur(2px)';
                
                const blurExtractedWatermark = document.getElementById('blur-extracted-watermark');
                blurExtractedWatermark.src = watermarkImage.data;
                blurExtractedWatermark.style.filter = 'blur(1px) contrast(0.9)';
                
                // Noise attack
                const noiseAttackImage = document.getElementById('noise-attack-image');
                noiseAttackImage.src = coverImage.data;
                noiseAttackImage.style.filter = 'contrast(1.1) brightness(1.1)';
                
                const noiseExtractedWatermark = document.getElementById('noise-extracted-watermark');
                noiseExtractedWatermark.src = watermarkImage.data;
                noiseExtractedWatermark.style.filter = 'brightness(1.2) contrast(0.85)';
                
                // JPEG compression attack
                const jpegAttackImage = document.getElementById('jpeg-attack-image');
                jpegAttackImage.src = coverImage.data;
                jpegAttackImage.style.filter = 'contrast(0.95) brightness(0.98)';
                
                const jpegExtractedWatermark = document.getElementById('jpeg-extracted-watermark');
                jpegExtractedWatermark.src = watermarkImage.data;
                jpegExtractedWatermark.style.filter = 'contrast(0.8) brightness(1.1)';
                
                // Crop attack
                const cropAttackImage = document.getElementById('crop-attack-image');
                cropAttackImage.src = coverImage.data;
                cropAttackImage.style.padding = '10%';
                cropAttackImage.style.boxSizing = 'border-box';
                
                const cropExtractedWatermark = document.getElementById('crop-extracted-watermark');
                cropExtractedWatermark.src = watermarkImage.data;
                cropExtractedWatermark.style.filter = 'blur(0.5px) contrast(0.75)';
                
                // Rotation attack
                const rotationAttackImage = document.getElementById('rotation-attack-image');
                rotationAttackImage.src = coverImage.data;
                rotationAttackImage.style.transform = 'rotate(5deg)';
                
                const rotationExtractedWatermark = document.getElementById('rotation-extracted-watermark');
                rotationExtractedWatermark.src = watermarkImage.data;
                rotationExtractedWatermark.style.filter = 'blur(0.8px) contrast(0.7)';
            }
            
            function generateMetrics() {
                // Generate random but realistic metrics for demonstration
                // In a real implementation, these would be calculated from the actual processed images
                
                // PSNR (typical range for good watermarking: 35-45 dB)
                const psnr = 38 + Math.random() * 7;
                document.getElementById('psnr-value').textContent = `PSNR: ${psnr.toFixed(2)} dB`;
                document.getElementById('metrics-psnr').textContent = `${psnr.toFixed(2)} dB`;
                
                // Set PSNR quality bar (0-100%)
                const psnrQuality = Math.min(100, (psnr - 30) * 10);
                document.getElementById('psnr-quality-bar').style.width = `${psnrQuality}%`;
                
                // Correlation coefficients (typical range: 0.7-0.99)
                const ccOriginal = 0.95 + Math.random() * 0.04;
                document.getElementById('cc-original-value').textContent = `Correlation: ${ccOriginal.toFixed(4)}`;
                document.getElementById('metrics-cc').textContent = ccOriginal.toFixed(4);
                
                // Set CC quality bar
                const ccQuality = ccOriginal * 100;
                document.getElementById('cc-quality-bar').style.width = `${ccQuality}%`;
                
                // Attack correlation coefficients
                const ccBlur = 0.85 + Math.random() * 0.1;
                document.getElementById('cc-blur-value').textContent = ccBlur.toFixed(4);
                document.getElementById('cc-blur-bar').style.width = `${ccBlur * 100}%`;
                
                const ccNoise = 0.82 + Math.random() * 0.1;
                document.getElementById('cc-noise-value').textContent = ccNoise.toFixed(4);
                document.getElementById('cc-noise-bar').style.width = `${ccNoise * 100}%`;
                
                const ccJpeg = 0.88 + Math.random() * 0.07;
                document.getElementById('cc-jpeg-value').textContent = ccJpeg.toFixed(4);
                document.getElementById('cc-jpeg-bar').style.width = `${ccJpeg * 100}%`;
                
                const ccCrop = 0.78 + Math.random() * 0.1;
                document.getElementById('cc-crop-value').textContent = ccCrop.toFixed(4);
                document.getElementById('cc-crop-bar').style.width = `${ccCrop * 100}%`;
                
                const ccRotation = 0.75 + Math.random() * 0.1;
                document.getElementById('cc-rotation-value').textContent = ccRotation.toFixed(4);
                document.getElementById('cc-rotation-bar').style.width = `${ccRotation * 100}%`;
                
                // Store for chart use
                window.metrics = {
                    psnr,
                    ccOriginal,
                    ccBlur,
                    ccNoise,
                    ccJpeg,
                    ccCrop,
                    ccRotation
                };
            }
            
            function createAttackChart() {
                const ctx = document.getElementById('attack-chart').getContext('2d');
                
                // Create the chart
                new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: ['No Attack', 'Blur', 'Noise', 'JPEG Compression', 'Cropping', 'Rotation'],
                        datasets: [{
                            label: 'Correlation Coefficient',
                            data: [
                                window.metrics.ccOriginal,
                                window.metrics.ccBlur,
                                window.metrics.ccNoise,
                                window.metrics.ccJpeg,
                                window.metrics.ccCrop,
                                window.metrics.ccRotation
                            ],
                            backgroundColor: 'rgba(66, 153, 225, 0.2)',
                            borderColor: 'rgba(66, 153, 225, 1)',
                            pointBackgroundColor: 'rgba(66, 153, 225, 1)',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: 'rgba(66, 153, 225, 1)'
                        }]
                    },
                    options: {
                        scales: {
                            r: {
                                angleLines: {
                                    display: true
                                },
                                suggestedMin: 0.5,
                                suggestedMax: 1
                            }
                        }
                    }
                });
            }
            
            function generateAnalysis() {
                // Calculate average correlation coefficient for attacks
                const attackCCs = [
                    window.metrics.ccBlur,
                    window.metrics.ccNoise,
                    window.metrics.ccJpeg,
                    window.metrics.ccCrop,
                    window.metrics.ccRotation
                ];
                
                const avgCC = attackCCs.reduce((a, b) => a + b, 0) / attackCCs.length;
                
                // Find best and worst attack resistance
                const attackTypes = ['Blur', 'Noise', 'JPEG Compression', 'Cropping', 'Rotation'];
                const bestAttackIndex = attackCCs.indexOf(Math.max(...attackCCs));
                const worstAttackIndex = attackCCs.indexOf(Math.min(...attackCCs));
                
                // Overall quality assessment
                let qualityAssessment;
                if (window.metrics.psnr > 40 && avgCC > 0.9) {
                    qualityAssessment = "Excellent";
                } else if (window.metrics.psnr > 35 && avgCC > 0.8) {
                    qualityAssessment = "Good";
                } else if (window.metrics.psnr > 30 && avgCC > 0.7) {
                    qualityAssessment = "Fair";
                } else {
                    qualityAssessment = "Poor";
                }
                
                // Recommended applications
                let applications;
                if (avgCC > 0.9) {
                    applications = "Copyright protection, ownership verification, content authentication";
                } else if (avgCC > 0.8) {
                    applications = "Digital rights management, broadcast monitoring";
                } else if (avgCC > 0.7) {
                    applications = "Basic tamper detection, casual copyright notice";
                } else {
                    applications = "Limited applications recommended";
                }
                
                // Update the summary
                document.getElementById('overall-quality').textContent = qualityAssessment;
                document.getElementById('best-resistance').textContent = attackTypes[bestAttackIndex];
                document.getElementById('worst-resistance').textContent = attackTypes[worstAttackIndex];
                document.getElementById('recommended-applications').textContent = applications;
                
                // Generate optimization suggestions
                const suggestions = document.getElementById('optimization-suggestions');
                suggestions.innerHTML = '';
                
                if (window.metrics.psnr < 35) {
                    addSuggestion("Decrease embedding strength (α) to improve imperceptibility.");
                }
                
                if (avgCC < 0.8) {
                    addSuggestion("Increase embedding strength (α) for better robustness against attacks.");
                }
                
                if (window.metrics.ccRotation < 0.8) {
                    addSuggestion("Use a rotation-invariant domain for watermark embedding to improve rotation resistance.");
                }
                
                if (window.metrics.ccCrop < 0.8) {
                    addSuggestion("Embed watermark in multiple redundant locations to improve cropping resistance.");
                }
                
                if (suggestions.innerHTML === '') {
                    addSuggestion("Current parameters are well-optimized for the selected images.");
                }
                
                function addSuggestion(text) {
                    const li = document.createElement('li');
                    li.textContent = text;
                    suggestions.appendChild(li);
                }
            }
        });
    </script>
</body>
</html>
